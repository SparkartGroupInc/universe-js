!function(e){if("object"==typeof exports)module.exports=e();else if("function"==typeof define&&define.amd)define(e);else{var n;"undefined"!=typeof window?n=window:"undefined"!=typeof global?n=global:"undefined"!=typeof self&&(n=self),n.Universe=e()}}(function(){return function e(n,t,o){function r(u,s){if(!t[u]){if(!n[u]){var a="function"==typeof require&&require;if(!s&&a)return a(u,!0);if(i)return i(u,!0);throw new Error("Cannot find module '"+u+"'")}var c=t[u]={exports:{}};n[u][0].call(c.exports,function(e){var t=n[u][1][e];return r(t?t:e)},c,c.exports,e,n,t,o)}return t[u].exports}for(var i="function"==typeof require&&require,u=0;u<o.length;u++)r(o[u]);return r}({1:[function(e,n){var t=function(){},o="https://services.sparkart.net/api/v1/",r=e("jsonp"),i=e("xhr"),u=function(e){if(!e.api_key)throw new Error("api_key must be specified when instantiating a Universe");this.api_key=e.api_key,this.logged_in=null,this.customer=null,this.fanclub=null,this.account_request_complete=!1,this.fanclub_request_complete=!1;var n=this,t=function(){n.account_request_complete&&n.fanclub_request_complete&&n.initialize()};this.request("account/status",{jsonp:!0},function(e,o){this.logged_in=o.logged_in,this.logged_in?n.request("account",function(e,o){n.customer=o?o.customer:null,n.account_request_complete=!0,t()}):(n.account_request_complete=!0,t())}),this.request("fanclub",function(e,o){n.fanclub=o?o.fanclub:null,n.fanclub_request_complete=!0,t()})};u.prototype.initialize=function(){console.log("initialize fanclub!",this)},u.prototype.generateURLfromEndpoint=function(e){return o+e+"?key="+this.api_key},u.prototype.request=function(e,n,o){"function"==typeof n&&(o=n,n={}),o=o||t;var u=this.generateURLfromEndpoint(e);"undefined"==typeof XDomainRequest||n.jsonp?r(u,function(e,n){o(e,n)}):i({uri:u,cors:!0},function(e,n,t){var r=JSON.parse(t);o(e,r)})},n.exports=u},{jsonp:2,xhr:4}],2:[function(e,n){function t(){}function o(e,n,o){function u(){s.parentNode.removeChild(s),window[m]=t}"function"==typeof n&&(o=n,n={}),n||(n={});var s,a,c=n.prefix||"__jp",f=n.param||"callback",l=null!=n.timeout?n.timeout:6e4,p=encodeURIComponent,d=document.getElementsByTagName("script")[0]||document.head,m=c+i++;l&&(a=setTimeout(function(){u(),o&&o(new Error("Timeout"))},l)),window[m]=function(e){r("jsonp got",e),a&&clearTimeout(a),u(),o&&o(null,e)},e+=(~e.indexOf("?")?"&":"?")+f+"="+p(m),e=e.replace("?&","?"),r('jsonp req "%s"',e),s=document.createElement("script"),s.src=e,d.parentNode.insertBefore(s,d)}var r=e("debug")("jsonp");n.exports=o;var i=0},{debug:3}],3:[function(e,n){function t(e){return t.enabled(e)?function(n){n=o(n);var r=new Date,i=r-(t[e]||r);t[e]=r,n=e+" "+n+" +"+t.humanize(i),window.console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}:function(){}}function o(e){return e instanceof Error?e.stack||e.message:e}n.exports=t,t.names=[],t.skips=[],t.enable=function(e){try{localStorage.debug=e}catch(n){}for(var o=(e||"").split(/[\s,]+/),r=o.length,i=0;r>i;i++)e=o[i].replace("*",".*?"),"-"===e[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$"))},t.disable=function(){t.enable("")},t.humanize=function(e){var n=1e3,t=6e4,o=60*t;return e>=o?(e/o).toFixed(1)+"h":e>=t?(e/t).toFixed(1)+"m":e>=n?(e/n|0)+"s":e+"ms"},t.enabled=function(e){for(var n=0,o=t.skips.length;o>n;n++)if(t.skips[n].test(e))return!1;for(var n=0,o=t.names.length;o>n;n++)if(t.names[n].test(e))return!0;return!1};try{window.localStorage&&t.enable(localStorage.debug)}catch(r){}},{}],4:[function(e,n){function t(e,n){function t(){4===f.readyState&&r()}function r(){var e=null,t=f.statusCode=f.status,o=f.body=f.response||f.responseText||f.responseXML;if(0===t||t>=400&&600>t){var r=f.responseText||u[String(f.status).charAt(0)];e=new Error(r),e.statusCode=f.status}if(g)try{o=f.body=JSON.parse(o)}catch(i){}n(e,f,o)}function c(e){n(e,f)}"string"==typeof e&&(e={uri:e}),e=e||{},n=i(n);var f;f=e.cors?new a:new s;var l=f.url=e.uri,p=f.method=e.method||"GET",d=e.body||e.data,m=f.headers=e.headers||{},h=!!e.sync,g=!1;return"json"in e&&(g=!0,m["Content-Type"]="application/json",d=JSON.stringify(e.json)),f.onreadystatechange=t,f.onload=r,f.onerror=c,f.onprogress=function(){},f.ontimeout=o,f.open(p,l,!h),e.cors&&(f.withCredentials=!0),h||(f.timeout="timeout"in e?e.timeout:5e3),f.setRequestHeader&&Object.keys(m).forEach(function(e){f.setRequestHeader(e,m[e])}),f.send(d),f}function o(){}var r=e("global/window"),i=e("once"),u={0:"Internal XMLHttpRequest Error",4:"4xx Client Error",5:"5xx Server Error"},s=r.XMLHttpRequest||o,a="withCredentials"in new s?r.XMLHttpRequest:r.XDomainRequest;n.exports=t},{"global/window":5,once:6}],5:[function(e,n){(function(e){n.exports="undefined"!=typeof window?window:"undefined"!=typeof e?e:{}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],6:[function(e,n){function t(e){var n=!1;return function(){return n?void 0:(n=!0,e.apply(this,arguments))}}n.exports=t,t.proto=t(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return t(this)},configurable:!0})})},{}]},{},[1])(1)});